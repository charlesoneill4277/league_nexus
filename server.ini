[server]
host = 0.0.0.0
port = 8080
workers = 4
protocol = https
tls_cert_file = /etc/letsencrypt/live/league-nexus.com/fullchain.pem
tls_key_file = /etc/letsencrypt/live/league-nexus.com/privkey.pem
max_request_size = 10m
request_timeout = 30s
keepalive_timeout = 5s
cors_allowed_origins = https://league-nexus.com,https://admin.league-nexus.com
cors_allowed_methods = GET,POST,PUT,DELETE,OPTIONS
cors_allowed_headers = Authorization,Content-Type
hsts_max_age = 31536000
hsts_include_subdomains = true

[database]
engine = postgresql
host = db.league-nexus.internal
port = 5432
name = league_nexus
user = nexus_user
password = ${DB_PASSWORD}
ssl_mode = require
pool_min_conns = 5
pool_max_conns = 20
timeout = 5s

[cache]
type = redis
host = cache.league-nexus.internal
port = 6379
password = ${REDIS_PASSWORD}
db = 0
default_ttl = 3600

[logging]
level = INFO
format = json
file = /var/log/league-nexus/server.log
rotation = daily
max_size = 100MB
max_backups = 7
max_age = 30
compress = true

[auth]
jwt_secret = ${JWT_SECRET}
access_token_expiry = 15m
refresh_token_expiry = 7d
token_issuer = league-nexus
token_audience = league-nexus-users

[features]
enable_ads = true
enable_premium = true
free_user_ad_refresh_interval = 60
premium_user_ad_refresh_interval = 0

[ads]
provider = google_ad_manager
network_id = ${GA_NETWORK_ID}
slot_id = ${GA_SLOT_ID}
refresh_interval = 60

[i18n]
default_locale = en_US
supported_locales = en_US,es_ES,fr_FR,de_DE,pt_BR
translations_path = /app/i18n

[email]
smtp_host = smtp.mailgun.org
smtp_port = 587
smtp_user = postmaster@mg.league-nexus.com
smtp_password = ${SMTP_PASSWORD}
from_address = no-reply@league-nexus.com
use_tls = true

[payment]
provider = stripe
stripe_api_key = ${STRIPE_API_KEY}
currency = USD

[api]
rate_limit_per_minute = 1000
rate_limit_burst = 200
enable_graphql = true
graphql_endpoint = /graphql

[monitoring]
metrics_endpoint = /metrics
prometheus_enabled = true
sentry_dsn = ${SENTRY_DSN}

[security]
content_security_policy = default-src 'self'; script-src 'self'; object-src 'none'
x_frame_options = DENY
x_content_type_options = nosniff
referrer_policy = strict-origin-when-cross-origin